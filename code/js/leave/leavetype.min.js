var leavetype_obj=null;$("#btnLeaveTypeClear").button().bind("click",clearLeaveType);$("#btnLeaveTypeUpdate").button().bind("click",updateLeaveType);$("#btnLeaveTypeAdd").button().bind("click",addLeaveType);$("#btnLeaveTypePrint").button().bind("click",printLeaveType);$("#leavetype-tabs").tabs();$("#txtLeaveTypeDesc").focus();clearLeaveType();$(window).resize(resizeLeaveTypeGrid);resizeLeaveTypeGrid();function resizeLeaveTypeGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-leavetype-entry").outerHeight()-55;$("div#sbg-leavetype-data").css("height",a+"px")}function clearLeaveType(){$("#txtLeaveTypeId").val("Auto");$("#txtLeaveTypeDesc").val("");$("#txtLeaveTypePeriod").val("1");$("#leavetype-tabs").tabs("option","active",0);$("#txtLeaveTypeDesc").focus();$("#btnLeaveTypeUpdate").prop("disabled","disabled");$("#leavetype_err_mesg").text("");$("#leavetype_err_desc").hide();leavetype_obj=null}function updateLeaveType(){saveLeaveType(C_UPDATE)}function addLeaveType(){saveLeaveType(C_ADD)}function saveLeaveType(b){if(validateLeaveType()){var c={type:b,id:$("#txtLeaveTypeId").val(),desc:$("#txtLeaveTypeDesc").val(),period:$("#txtLeaveTypePeriod").val()};var a="request.pzx?c="+leavetype_url+"&d="+new Date().getTime();callServer(a,"json",c,onLeaveTypeResponse,leavetype_obj)}}function printLeaveType(){var a="report.pzx?c="+leavetype_url+"&d="+new Date().getTime();showReport(a)}function editLeaveType(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+leavetype_url+"&d="+new Date().getTime();leavetype_obj=c;callServer(a,"json",b,showLeaveType,c)}function deleteLeaveType(d,c){if(confirm("Confirm you want to delete leave type id : "+d+"?")){var b={type:C_DELETE,id:d};var a="request.pzx?c="+leavetype_url+"&d="+new Date().getTime();callServer(a,"json",b,onLeaveTypeResponse,c)}}function showLeaveType(a,b){if(b.status==C_OK){$("#txtLeaveTypeId").val(b.data.id);$("#txtLeaveTypeDesc").val(b.data.desc);$("#txtLeaveTyepPeriod").val(b.data.period);$("#txtLeaveTypeDesc").focus();$("#btnLeaveTypeUpdate").prop("disabled","")}else{showDialog("System Message",b.mesg)}}function onLeaveTypeResponse(a,b){if(b.status==C_OK){if(b.type==C_ADD){$("#sbg-leavetype-table tr:first").after("<tr><td>"+b.data+"</td><td>"+$("#txtLeaveTypeDesc").val()+"</td><td>"+$("#txtLeaveTypePeriod").val()+"</td><td style='text-align:center'><a href='javascript:' onclick='editLeaveType("+b.data+",this)'><img src='image/edit_16.png' title='Edit'></img></a></td><td style='text-align:center'><a href='javascript:' onclick='deleteLeaveType("+b.data+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")}else{if(b.type==C_DELETE){$($(a).closest("tr")).remove()}else{if(b.type==C_UPDATE){$($(a).closest("tr")).children("td:eq(1)").html($("#txtLeaveTypeDesc").val());$($(a).closest("tr")).children("td:eq(2)").text($("#txtLeaveTypePeriod").val())}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000);clearLeaveType()}else{showDialog("Error",b.mesg)}}function validateLeaveType(){$("#leavetype_err_mesg").text("");if($("#txtLeaveTypeDesc").blank()){$("#leavetype_err_desc").show();$("#txtLeaveTypeDesc").focus();$("#leavetype_err_mesg").text("Leave Type description can not be blank.");return false}else{$("#leavetype_err_desc").hide()}return true};