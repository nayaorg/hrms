var claim_group_head_obj=null;var claim_group_head_id_array=[];var m_limitidx=0;$(document).ready(function(){$("#btnClaimGroupHeadAdd").button().bind("click",addClaimGroupHead);$("#cobDeptHead").change(populateHead)});function clearClaimGroupHead(){claim_group_head_obj=null;claim_group_head_id_array=[];$("#tblHeadLimit").empty();m_limitidx=0}function addClaimGroupHead(){if(validateClaimGroupHead()){$("#sbg-claim-group-head-table tr:last").after("<tr id='claim-group-head-row_"+$("#txtHeadId").val()+"'><td align='center'>"+$("#txtHeadId").val()+"</td><td align='center'><a href='javascript:' onclick='removeHeadLimit("+$("#txtHeadId").val()+")'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>");claim_group_head_id_array.push($("#txtHeadId").val());$("#txtHeadId").val("")}}function addAllClaimGroupHead(e){if(claim_group_head_id_array.length!=0){var d="";for(var b=0;b<claim_group_head_id_array.length;b++){if(b==0){d+=""+claim_group_head_id_array[b]}else{d+="|"+claim_group_head_id_array[b]}}alert(d);var c={type:C_ADD,id:e,head_ids:d};var a="request.pzx?c="+claim_group_head_url+"&d="+new Date().getTime();callServer(a,"json",c,onClaimGroupHeadResponse,claim_group_head_obj)}}function removeClaimGroupHeadRow(b){$("tr#claim-group-head-row_"+b).remove();var a=jQuery.inArray(""+b,claim_group_head_id_array);if(a!=-1){claim_group_head_id_array.splice(a,1)}}function deleteAllClaimGroupHead(c){var b={type:C_DELETE,id:c};var a="request.pzx?c="+claim_group_head_url+"&d="+new Date().getTime();callServer(a,"json",b,onClaimGroupHeadResponse,claim_group_head_obj)}function deleteClaimGroupHead(c){if(confirm("Confirm you want to delete head id: "+c+"?")){$("tr#claim-group-head-row_"+c).remove();var b={type:C_DELETE,id:$("#txtClaimGroupId").val(),head_id:c};var a="request.pzx?c="+claim_group_head_url+"&d="+new Date().getTime();callServer(a,"json",b,onClaimGroupHeadResponse,null)}}function showAllClaimGroupHead(){var b={type:C_LIST,id:$("#txtClaimGroupId").val()};var a="request.pzx?c="+claim_group_head_url+"&d="+new Date().getTime();callServer(a,"json",b,onClaimGroupHeadResponse,claim_group_head_obj)}function onClaimGroupHeadResponse(f,g){if(g.status==C_OK){if(g.type==C_ADD){clearClaimGroupHead()}else{if(g.type==C_LIST){jQuery.each(g.data,function(){$("#sbg-claim-group-head-table tr:last").after("<tr id='claim-group-head-row_"+this.head_id+"'><td align='center'>"+this.head_id+"</td><td align='center'><a href='javascript:' onclick='deleteClaimGroupHead("+this.head_id+")'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")})}else{if(g.type==C_GET){var b=g.data.empList;var a=b.split("|");var e="";var d="";for(var c=0;c<a.length;c++){e=a[c].split(":");d+="<option value='"+e[0]+"'>"+e[1]+"</option>"}$("#cobEmpHead").html(d)}}}$("#sbg-popup-box").html(g.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000)}else{showDialog("Error",g.mesg)}}function validateClaimGroupHead(){var a=true;$("#claim_group_err_mesg").text("");if($("#txtHeadId").blank()){$("#claim_group_err_head_id").show();$("#txtHeadId").focus();$("#claim_group_err_mesg").text($("#claim_group_err_mesg").text()+"Head ID can not be blank. ");a=false}else{$("#claim_group_err_head_id").hide()}return a}function populateHead(){$dept_id=$("#cobDeptHead").val();var b={type:C_GET,id:$dept_id};var a="request.pzx?c="+claim_group_head_url+"&d="+new Date().getTime();callServer(a,"json",b,onClaimGroupHeadResponse,claim_group_head_obj)}function addHeadLimit(){m_limitidx++;$("#tblHeadLimit").append("<tr id='tritem"+m_limitidx+"'><td style='width:30px;'>"+m_limitidx+"</td><td style='width:50px;'><input style='width:50px' id='txtHeadId"+m_limitidx+"' value='"+$("#cobEmpHead").val()+"'></input></td><td style='width:120px;'><input style='width:200px' id='txtHead"+m_limitidx+"' value='"+$("#cobEmpHead :selected").text()+"'></input></td><td style='width:40px;text-align:center;'><a href='javascript:' onclick='removeHeadLimit("+m_limitidx+")'><img src='image/remove_16.png' title='Remove'></img></a></td></tr>");$("#txtHeadId"+m_limitidx).append($("#txtHeadId").html())}function removeHeadLimit(a){$("#tritem"+a).remove()}function showHeadLimit(b){if(b==undefined||b==null||b==""){return}$("#tblHeadLimit").empty();var a=b.split("|");var d="";m_limitidx=0;for(var c=0;c<a.length;c++){if(a[c]!=""){d=a[c].split(":");m_limitidx++;$("#tblHeadLimit").append("<tr id='tritem"+m_limitidx+"'><td style='width:30px;'>"+m_limitidx+"</td><td style='width:50px;'><input style='width:50px' id='txtHeadId"+m_limitidx+"' value='"+d[0]+"'></input></td><td style='width:120px;'><input style='width:200px' id='txtHead"+m_limitidx+"' value='"+d[1]+"'></input></td><td style='width:40px;text-align:center;'><a href='javascript:' onclick='removeHeadLimit("+m_limitidx+")'><img src='image/remove_16.png' title='Remove'></img></a></td></tr>");$("#txtHeadId"+m_limitidx).append($("#txtHeadId").html());$("#txtHead"+m_limitidx).append($("#txtHead").html())}}};