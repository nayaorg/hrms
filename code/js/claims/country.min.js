var country_obj=null;$(document).ready(function(){$("#btnCountryClear").button().bind("click",clearCountry);$("#btnCountryAdd").button().bind("click",addCountry);$("#btnCountryUpdate").button().bind("click",updateCountry);$("#btnCountryPrint").button().bind("click",printCountry);$("#country-tabs").tabs();$("#txtCountryDesc").focus();$(window).resize(resizeCountryGrid);resizeCountryGrid();clearCountry()});function resizeCountryGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-country-entry").outerHeight()-55;$("div#sbg-country-data").css("height",a+"px")}function clearCountry(){$("#txtCountryId").val("Auto");$("#txtCountryDesc").val("");$("#txtCountryRef").val("");$("#country-tabs").tabs("option","active",0);$("#txtCountryDesc").focus();$("#btnCountryUpdate").prop("disabled","disabled");$("#country_err_mesg").text("");$("#country_err_desc").hide();$("#country_err_ref").hide();country_obj=null}function updateCountry(){saveCountry(C_UPDATE)}function addCountry(){saveCountry(C_ADD)}function saveCountry(b){if(validateCountry()){var c={type:b,id:$("#txtCountryId").val(),desc:$("#txtCountryDesc").val(),ref:$("#txtCountryRef").val()};var a="request.pzx?c="+country_url+"&d="+new Date().getTime();callServer(a,"json",c,onCountryResponse,country_obj)}}function printCountry(){var a="report.pzx?c="+country_url+"&d="+new Date().getTime();showReport(a)}function editCountry(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+country_url+"&d="+new Date().getTime();country_obj=c;callServer(a,"json",b,showCountry,c)}function deleteCountry(d,c){if(confirm("Confirm you want to delete country id : "+d+"?")){var b={type:C_DELETE,id:d};var a="request.pzx?c="+country_url+"&d="+new Date().getTime();callServer(a,"json",b,onCountryResponse,c)}}function showCountry(a,b){if(b.status==C_OK){$("#txtCountryId").val(b.data.id);$("#txtCountryDesc").val(b.data.desc);$("#txtCountryRef").val(b.data.ref);$("#btnCountryUpdate").prop("disabled","");$("#txtCountryDesc").focus()}else{showDialog("System Message",b.mesg)}}function onCountryResponse(a,b){if(b.status==C_OK){if(b.type==C_ADD){$("#sbg-country-table tr:first").after("<tr><td>"+b.data+"</td><td>"+$("#txtCountryDesc").val()+"</td><td style='text-align:center'><a href='javascript:' onclick='editCountry("+b.data+",this)'><img src='image/edit_16.png' title='Edit'></img></a></td><td style='text-align:center'><a href='javascript:' onclick='deleteCountry("+b.data+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")}else{if(b.type==C_DELETE){$($(a).closest("tr")).remove()}else{if(b.type==C_UPDATE){$($(a).closest("tr")).children("td:eq(1)").html($("#txtCountryDesc").val())}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000);clearCountry()}else{showDialog("Error",b.mesg)}}function validateCountry(){$("#country_err_mesg").text("");if($("#txtCountryDesc").blank()){$("#country_err_desc").show();$("#txtCountryDesc").focus();$("#country_err_mesg").text("country description can not be blank.");return false}else{$("#country_err_desc").hide()}return true};