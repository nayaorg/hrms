var claim_limit_obj=null;var claim_limit_data="";$(document).ready(function(){$("#btnClaimLimitAdd").button().bind("click",addClaimLimit)});function clearClaimLimit(){claim_limit_obj=null;claim_limit_data="";$("tr[id^='claim-limit-row']").remove()}function addClaimLimit(){if(validateClaimLimit()){$("#sbg-claim-limit-table tr:last").after("<tr id='claim-limit-row_"+$("#menuClaimGroupId").val()+"'><td align='center'>"+$("#menuClaimGroupId option:selected").text()+"</td><td align='center'>"+$("#menuClaimLimitType").val()+"</td><td align='center'>"+$("#txtClaimLimitAmount").val()+"</td><td align='center'><a href='javascript:' onclick='removeClaimGroupHeadRow("+$("#menuClaimGroupId").val()+")'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>");if(claim_limit_data!=""){claim_limit_data+="|"+$("#menuClaimGroupId").val()+"--"+$("#menuClaimLimitType").val()+"--"+$("#txtClaimLimitAmount").val()}else{claim_limit_data+=$("#menuClaimGroupId").val()+"--"+$("#menuClaimLimitType").val()+"--"+$("#txtClaimLimitAmount").val()}$("#menuClaimGroupId").val("");$("#menuClaimLimitType").val("");$("#txtClaimLimitAmount").val("")}}function addAllClaimLimit(b){if(claim_limit_data!=""){var c={type:C_ADD,expense_item:b,data:claim_limit_data};var a="request.pzx?c="+claim_limit_url+"&d="+new Date().getTime();callServer(a,"json",c,onClaimLimitResponse,claim_limit_obj)}}function deleteAllClaimLimit(b){var c={type:C_DELETE,expense_item:b};var a="request.pzx?c="+claim_limit_url+"&d="+new Date().getTime();callServer(a,"json",c,onClaimLimitResponse,claim_limit_obj)}function deleteClaimLimit(b,e,d){if(confirm("Confirm you want to delete claim limit : expense_item-"+b+", claim_group_id-"+e+"?")){var c={type:C_DELETE,expense_item:b,grp_id:e};var a="request.pzx?c="+claim_limit_url+"&d="+new Date().getTime();callServer(a,"json",c,onClaimLimitResponse,d)}}function showAllClaimLimits(b){var c={type:C_LIST,expense_item:b};var a="request.pzx?c="+claim_limit_url+"&d="+new Date().getTime();callServer(a,"json",c,onClaimLimitResponse,claim_limit_obj)}function onClaimLimitResponse(a,b){if(b.status==C_OK){if(b.type==C_DELETE){$("tr#claim-limit-row_"+b.data).remove()}else{if(b.type==C_UPDATE){showAllClaimLimits($("#txtClaimLimitClaimId").val());$("#btnClaimLimitAdd").show();$("#btnClaimLimitClear").show();$("#btnClaimLimitUpdate").hide();clearClaimLimit()}else{if(b.type==C_LIST){clearClaimLimit();jQuery.each(b.data,function(){$("#sbg-claim-limit-table tr:last").after("<tr id='claim-limit-row_"+this.grp_id+"'><td align='center'>"+this.grp+"</td><td align='center'>"+this.limit_type+"</td><td align='center'>"+this.limit_amt+"</td><td style='text-align:center'><a href='javascript:' onclick='deleteClaimLimit("+this.expense_item+","+this.grp_id+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")})}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000)}else{showDialog("Error",b.mesg)}}function validateClaimLimit(){var a=true;$("#expense_item_err_mesg").text("");if($("#menuClaimGroupId").blank()){$("#claim_limit_err_claim_group_id").show();$("#menuClaimGroupId").focus();$("#expense_item_err_mesg").text($("#expense_item_err_mesg").text()+"Claim Group ID can not be blank. ");a=false}else{$("#claim_limit_err_claim_group_id").hide()}if($("#menuClaimLimitType").blank()){$("#claim_limit_err_type").show();$("#menuClaimLimitType").focus();$("#expense_item_err_mesg").text($("#expense_item_err_mesg").text()+"Please select a Claim Limit Type. ");a=false}else{$("#claim_limit_err_type").hide()}if($("#txtClaimLimitAmount").blank()){$("#claim_limit_err_amount").show();$("#txtClaimLimitAmount").focus();$("#expense_item_err_mesg").text($("#expense_item_err_mesg").text()+"Claim Limit Amount can not be blank. ");a=false}else{$("#claim_limit_err_amount").hide()}return a};