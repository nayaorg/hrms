var claim_item_approval_obj=null;var claim_item_approval_line_no=null;var claim_items_total_approval_amount=0;$(document).ready(function(){$(window).resize(resizeClaimItemGrid);resizeClaimItemGrid()});function resizeClaimItemGrid(){var a=$("#sbg-center-panel").outerHeight()*0.4;$("div#sbg-claim-item-data").css("height",a+"px")}function approveClaimItems(){claim_items_total_approval_amount=0;for(var a=0;a<claim_item_approval_line_no.length;a++){updateClaimItem(claim_item_approval_line_no[a])}updateClaimApprovedAmount($("#txtClaimItemClaimId").val(),claim_items_total_approval_amount)}function updateClaimItem(a){var c={type:C_UPDATE,id:$("#txtClaimItemClaimId").val(),line_no:a,approved_amt:$("#txtClaimItemApprovedAmount_"+$("#txtClaimItemClaimId").val()+"_"+a).val()};var b="request.pzx?c="+claim_item_approval_url+"&d="+new Date().getTime();claim_items_total_approval_amount+=parseInt($("#txtClaimItemApprovedAmount_"+$("#txtClaimItemClaimId").val()+"_"+a).val());callServer(b,"json",c,onClaimItemResponse,claim_item_approval_obj)}function showAllClaimItems(c){var b={type:C_LIST,id:c};var a="request.pzx?c="+claim_item_approval_url+"&d="+new Date().getTime();$("#txtClaimItemClaimId").val(c);callServer(a,"json",b,onClaimItemResponse,claim_item_approval_obj)}function onClaimItemResponse(a,b){if(b.status==C_OK){if(b.type==C_UPDATE){}else{if(b.type==C_LIST){$("tr#claim-item-rows").remove();claim_item_approval_line_no=[];jQuery.each(b.data,function(){claim_item_approval_line_no.push(this.line_no);$("#sbg-claim-item-table tr:first").after("<tr id='claim-item-rows'><td>"+this.line_no+"</td><td>"+this.desc+"</td><td>"+this.expense_item+"</td><td>"+this.amt+"</td><td>"+this.curr+"</td><td><input type='text' id='txtClaimItemApprovedAmount_"+$("#txtClaimItemClaimId").val()+"_"+this.line_no+"' value='"+this.approved_amt+"' size='10'></input></td><td>"+this.doc_id+"</td></tr>")})}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000)}else{showDialog("Error",b.mesg)}};