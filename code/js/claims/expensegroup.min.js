var expense_group_obj=null;$(document).ready(function(){$("#btnExpenseGroupAdd").button().bind("click",addExpenseGroup);$("#btnExpenseGroupClear").button().bind("click",clearExpenseGroup);$("#btnExpenseGroupUpdate").button().bind("click",updateExpenseGroup);$("#btnExpenseGroupPrint").button().bind("click",printExpenseGroup);$("#btnExpenseGroupUpdate").hide();$("#expense-group-tabs").tabs();$("#txtExpenseGroupDesc").focus();clearExpenseGroup();$(window).resize(resizeExpenseGroupGrid);resizeExpenseGroupGrid()});function resizeExpenseGroupGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-expense-group-entry").outerHeight()-55;$("div#sbg-expense-group-data").css("height",a+"px")}function clearExpenseGroup(){$("#txtExpenseGroupId").val("Auto");$("#txtExpenseGroupRef").val("");$("#txtExpenseGroupDesc").val("");$("#expense-group-tabs").tabs("option","active",0);$("#expense_group_err_mesg").text("");$("#expense_group_err_desc").hide();$("#expense_group_err_desc").hide();$("#btnExpenseGroupUpdate").hide();$("#btnExpenseGroupAdd").show();expense_group_obj=null}function updateExpenseGroup(){saveExpenseGroup(C_UPDATE)}function addExpenseGroup(){saveExpenseGroup(C_ADD)}function saveExpenseGroup(b){if(validateExpenseGroup()){var c={type:b,id:$("#txtExpenseGroupId").val(),ref:$("#txtExpenseGroupRef").val(),desc:$("#txtExpenseGroupDesc").val()};var a="request.pzx?c="+expense_group_url+"&d="+new Date().getTime();callServer(a,"json",c,onExpenseGroupResponse,expense_group_obj)}}function editExpenseGroup(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+expense_group_url+"&d="+new Date().getTime();expense_group_obj=c;callServer(a,"json",b,showExpenseGroup,c)}function deleteExpenseGroup(d,c){if(confirm("Confirm you want to delete expense item group id : "+d+"?")){var b={type:C_DELETE,id:d};var a="request.pzx?c="+expense_group_url+"&d="+new Date().getTime();callServer(a,"json",b,onExpenseGroupResponse,c)}}function showExpenseGroup(a,b){if(b.status==C_OK){$("#txtExpenseGroupId").val(b.data.id);$("#txtExpenseGroupRef").val(b.data.ref);$("#txtExpenseGroupDesc").val(b.data.desc);$("#txtExpenseGroupDesc").focus();$("#btnExpenseGroupUpdate").show();$("#btnExpenseGroupAdd").hide()}else{showDialog("System Message",b.mesg)}}function onExpenseGroupResponse(a,b){if(b.status==C_OK){if(b.type==C_ADD){$("#sbg-expense-group-table tr:first").after("<tr><td>"+b.data+"</td><td>"+$("#txtExpenseGroupDesc").val()+"</td><td>"+$("#txtExpenseGroupRef").val()+"</td><td style='text-align:center'><a href='javascript:' onclick='editExpenseGroup("+b.data+",this)'><img src='image/edit_16.png' title='Edit'></img></a></td><td style='text-align:center'><a href='javascript:' onclick='deleteExpenseGroup("+b.data+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")}else{if(b.type==C_DELETE){$($(a).closest("tr")).remove()}else{if(b.type==C_UPDATE){$($(a).closest("tr")).children("td:eq(0)").html($("#txtExpenseGroupId").val());$($(a).closest("tr")).children("td:eq(1)").html($("#txtExpenseGroupDesc").val());$($(a).closest("tr")).children("td:eq(2)").text($("#txtExpenseGroupRef").val())}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000);clearExpenseGroup()}else{showDialog("Error",b.mesg)}}function validateExpenseGroup(){$("#expense_group_err_mesg").text("");if($("#txtExpenseGroupDesc").blank()){$("#expense_group_err_desc").show();$("#txtExpenseGroupDesc").focus();$("#expense_group_err_mesg").text("Expense Item Group Description can not be blank.");return false}else{$("#expense_group_err_desc").hide()}return true}function printExpenseGroup(){var a="report.pzx?c="+expense_group_url+"&d="+new Date().getTime();showReport(a)};