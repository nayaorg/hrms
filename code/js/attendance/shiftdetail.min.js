var shift_detail_obj=null;$("#btnShiftDetailClear").button().bind("click",clearShiftDetail);$("#btnShiftDetailUpdate").button().bind("click",updateShiftDetail);$("#btnShiftDetailAdd").button().bind("click",addShiftDetail);$("#btnShiftDetailPrint").button().bind("click",printShiftDetail);$("#shift-detail-tabs").tabs();$("#rdoShiftDetailType").focus();$("#shiftDaily").hide();$("#shiftWeekly").hide();$(window).resize(resizeShiftDetailGrid);resizeShiftDetailGrid();clearShiftDetail();$("input:radio[name=rdoShiftDetailType]").change(function(){val=$("input:radio[name=rdoShiftDetailType]:checked").val();if(val==0){$("#shiftDaily").show();$("#shiftWeekly").hide()}else{if(val==1){$("#shiftDaily").hide();$("#shiftWeekly").show()}}});function resizeShiftDetailGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-shift-detail-entry").outerHeight()-55;$("div#sbg-shift-detail-data").css("height",a+"px")}function clearShiftDetail(){$("#txtShiftDetailId").val("Auto");$("input:radio[name=rdoShiftDetailType]:checked").prop("checked",false);$("#rdoShiftDetailType").focus();$("#cobShiftGroup").val("");$(".cobShift").val("");$("#shiftDaily").hide();$("#shiftWeekly").hide();$("#shift-detail-tabs").tabs("option","active",0);$("#txtShiftDetailDesc").focus();$("#btnShiftDetailUpdate").prop("disabled","disabled");$("#shift_detail_err_mesg").text("");$("#shift_detail_err_desc").hide();shift_detail_obj=null}function updateShiftDetail(){saveShiftDetail(C_UPDATE)}function addShiftDetail(){saveShiftDetail(C_ADD)}function saveShiftDetail(b){if(validateShiftDetail()){var d=$("input:radio[name=rdoShiftDetailType]:checked").val();var c={type:b,id:$("#txtShiftDetailId").val(),shifttype:d,groupid:$("#cobShiftGroup").val(),shift01:$("#cobShift01").val(),shift02:$("#cobShift02").val(),shift03:$("#cobShift03").val(),shift04:$("#cobShift04").val(),shift05:$("#cobShift05").val(),shift06:$("#cobShift06").val(),shift07:$("#cobShift07").val(),shift08:$("#cobShift08").val(),shift09:$("#cobShift09").val(),shift10:$("#cobShift10").val(),shift11:$("#cobShift11").val(),shift12:$("#cobShift12").val(),shift13:$("#cobShift13").val(),shift14:$("#cobShift14").val(),shift15:$("#cobShift15").val(),shift16:$("#cobShift16").val(),shift17:$("#cobShift17").val(),shift18:$("#cobShift18").val(),shift19:$("#cobShift19").val(),shift20:$("#cobShift20").val(),shift21:$("#cobShift21").val(),shift22:$("#cobShift22").val(),shift23:$("#cobShift23").val(),shift24:$("#cobShift24").val(),shift25:$("#cobShift25").val(),shift26:$("#cobShift26").val(),shift27:$("#cobShift27").val(),shift28:$("#cobShift28").val(),shift29:$("#cobShift29").val(),shift30:$("#cobShift30").val(),shift31:$("#cobShift31").val(),shiftMon:$("#cobShiftMon").val(),shiftTue:$("#cobShiftTue").val(),shiftWed:$("#cobShiftWed").val(),shiftThu:$("#cobShiftThu").val(),shiftFri:$("#cobShiftFri").val(),shiftSat:$("#cobShiftSat").val(),shiftSun:$("#cobShiftSun").val()};var a="request.pzx?c="+shift_detail_url+"&d="+new Date().getTime();callServer(a,"json",c,onShiftDetailResponse,shift_detail_obj)}}function printShiftDetail(){var a="report.pzx?c="+shift_detail_url+"&d="+new Date().getTime();showReport(a)}function editShiftDetail(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+shift_detail_url+"&d="+new Date().getTime();shift_detail_obj=c;callServer(a,"json",b,showShiftDetail,c)}function deleteShiftDetail(d,c){if(confirm("Confirm you want to delete shift detail id : "+d+"?")){var b={type:C_DELETE,id:d};var a="request.pzx?c="+shift_detail_url+"&d="+new Date().getTime();callServer(a,"json",b,onShiftDetailResponse,c)}}function showShiftDetail(a,b){if(b.status==C_OK){$("#txtShiftDetailId").val(b.data.id);$("input:radio[name=rdoShiftDetailType][value="+b.data.shifttype+"]").prop("checked",true);$("#cobShiftGroup").val(b.data.groupid);if(b.data.shifttype==0){$("#shiftDaily").show();$("#shiftWeekly").hide();$("#cobShift01").val(b.data.shift01);$("#cobShift02").val(b.data.shift02);$("#cobShift03").val(b.data.shift03);$("#cobShift04").val(b.data.shift04);$("#cobShift05").val(b.data.shift05);$("#cobShift06").val(b.data.shift06);$("#cobShift07").val(b.data.shift07);$("#cobShift08").val(b.data.shift08);$("#cobShift09").val(b.data.shift09);$("#cobShift10").val(b.data.shift10);$("#cobShift11").val(b.data.shift11);$("#cobShift12").val(b.data.shift12);$("#cobShift13").val(b.data.shift13);$("#cobShift14").val(b.data.shift14);$("#cobShift15").val(b.data.shift15);$("#cobShift16").val(b.data.shift16);$("#cobShift17").val(b.data.shift17);$("#cobShift18").val(b.data.shift18);$("#cobShift19").val(b.data.shift19);$("#cobShift20").val(b.data.shift20);$("#cobShift21").val(b.data.shift21);$("#cobShift22").val(b.data.shift22);$("#cobShift23").val(b.data.shift23);$("#cobShift24").val(b.data.shift24);$("#cobShift25").val(b.data.shift25);$("#cobShift26").val(b.data.shift26);$("#cobShift27").val(b.data.shift27);$("#cobShift28").val(b.data.shift28);$("#cobShift29").val(b.data.shift29);$("#cobShift30").val(b.data.shift30);$("#cobShift31").val(b.data.shift31)}else{if(b.data.shifttype==1){$("#shiftDaily").hide();$("#shiftWeekly").show();$("#cobShiftMon").val(b.data.shiftMon);$("#cobShiftTue").val(b.data.shiftTue);$("#cobShiftWed").val(b.data.shiftWed);$("#cobShiftThu").val(b.data.shiftThu);$("#cobShiftFri").val(b.data.shiftFri);$("#cobShiftSat").val(b.data.shiftSat);$("#cobShiftSun").val(b.data.shiftSun)}}$("#btnShiftDetailUpdate").prop("disabled","");$("#txtShiftDetailDesc").focus()}else{showDialog("System Message",b.mesg)}}function onShiftDetailResponse(a,b){if(b.status==C_OK){if(b.type==C_ADD){if($("#rdoShiftDetailType:checked").val()==0){var c="Daily"}else{if($("#rdoShiftDetailType:checked").val()==1){var c="Weekly"}}$("#sbg-shift-detail-table tr:first").after("<tr><td>"+b.data+"</td><td>"+c+"</td><td>"+$("#cobShiftGroup :selected").text()+"</td><td style='text-align:center'><a href='javascript:' onclick='editShiftDetail("+b.data+",this)'><img src='image/edit_16.png' title='Edit'></img></a></td><td style='text-align:center'><a href='javascript:' onclick='deleteShiftDetail("+b.data+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")}else{if(b.type==C_DELETE){$($(a).closest("tr")).remove()}else{if(b.type==C_UPDATE){if($("#rdoShiftDetailType:checked").val()==0){var c="Daily"}else{if($("#rdoShiftDetailType:checked").val()==1){var c="Weekly"}}$($(a).closest("tr")).children("td:eq(1)").html(c);$($(a).closest("tr")).children("td:eq(2)").text($("#cobShiftGroup :selected").text())}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(10000);clearShiftDetail()}else{showDialog("Error",b.mesg)}}function validateShiftDetail(){$("#shift_detail_err_mesg").text("");if($("input:radio[name=rdoShiftDetailType]:checked").blank()){$("#shift_detail_err_desc").show();$("#rdoShiftDetailType").focus();$("#shift_detail_err_mesg").text("shift type must be chosen.");return false}if($("#cobShiftGroup").blank()){$("#shift_detail_err_desc").show();$("#cobShiftGroup").focus();$("#shift_detail_err_mesg").text("shift group can not be blank.");return false}else{$("#shift_detail_err_desc").hide()}return true};