var shift_group_obj=null;$("#btnShiftGroupClear").button().bind("click",clearShiftGroup);$("#btnShiftGroupUpdate").button().bind("click",updateShiftGroup);$("#btnShiftGroupAdd").button().bind("click",addShiftGroup);$("#btnShiftGroupPrint").button().bind("click",printShiftGroup);$("#shift-group-tabs").tabs();$("#txtShiftGroupDesc").focus();$(window).resize(resizeShiftGroupGrid);resizeShiftGroupGrid();clearShiftGroup();function resizeShiftGroupGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-shift-group-entry").outerHeight()-55;$("div#sbg-shift-group-data").css("height",a+"px")}function clearShiftGroup(){$("#txtShiftGroupId").val("Auto");$("#txtShiftGroupDesc").val("");$("#txtShiftGroupRef").val("");$("#shift-group-tabs").tabs("option","active",0);$("#txtShiftGroupDesc").focus();$("#btnShiftGroupUpdate").prop("disabled","disabled");$("#shift_group_err_mesg").text("");$("#shift_group_err_desc").hide();shift_group_obj=null}function updateShiftGroup(){saveShiftGroup(C_UPDATE)}function addShiftGroup(){saveShiftGroup(C_ADD)}function saveShiftGroup(b){if(validateShiftGroup()){var c={type:b,id:$("#txtShiftGroupId").val(),desc:$("#txtShiftGroupDesc").val(),refno:$("#txtShiftGroupRef").val()};var a="request.pzx?c="+shift_group_url+"&d="+new Date().getTime();callServer(a,"json",c,onShiftGroupResponse,shift_group_obj)}}function printShiftGroup(){var a="report.pzx?c="+shift_group_url+"&d="+new Date().getTime();showReport(a)}function editShiftGroup(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+shift_group_url+"&d="+new Date().getTime();shift_group_obj=c;callServer(a,"json",b,showShiftGroup,c)}function deleteShiftGroup(d,c){if(confirm("Confirm you want to delete shift group id : "+d+"?")){var b={type:C_DELETE,id:d};var a="request.pzx?c="+shift_group_url+"&d="+new Date().getTime();callServer(a,"json",b,onShiftGroupResponse,c)}}function showShiftGroup(a,b){if(b.status==C_OK){$("#txtShiftGroupId").val(b.data.id);$("#txtShiftGroupDesc").val(b.data.desc);$("#txtShiftGroupRef").val(b.data.refno);$("#btnShiftGroupUpdate").prop("disabled","");$("#txtShiftGroupDesc").focus()}else{showDialog("System Message",b.mesg)}}function onShiftGroupResponse(a,b){if(b.status==C_OK){if(b.type==C_ADD){$("#sbg-shift-group-table tr:first").after("<tr><td>"+b.data+"</td><td>"+$("#txtShiftGroupDesc").val()+"</td><td>"+$("#txtShiftGroupRef").val()+"</td><td style='text-align:center'><a href='javascript:' onclick='editShiftGroup("+b.data+",this)'><img src='image/edit_16.png' title='Edit'></img></a></td><td style='text-align:center'><a href='javascript:' onclick='deleteShiftGroup("+b.data+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")}else{if(b.type==C_DELETE){$($(a).closest("tr")).remove()}else{if(b.type==C_UPDATE){$($(a).closest("tr")).children("td:eq(1)").html($("#txtShiftGroupDesc").val());$($(a).closest("tr")).children("td:eq(2)").text($("#txtShiftGroupRef").val())}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(10000);clearShiftGroup()}else{showDialog("Error",b.mesg)}}function validateShiftGroup(){$("#shift_group_err_mesg").text("");if($("#txtShiftGroupDesc").blank()){$("#shift_group_err_desc").show();$("#txtShiftGroupDesc").focus();$("#shift_group_err_mesg").text("shift group description can not be blank.");return false}else{$("#shift_group_err_desc").hide()}return true};