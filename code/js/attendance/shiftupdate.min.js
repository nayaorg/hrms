var shift_update_obj=null;$("#btnShiftUpdateClear").button().bind("click",clearShiftUpdate);$("#btnShiftUpdateUpdate").button().bind("click",updateShiftUpdate);$("#btnShiftUpdateAdd").button().bind("click",addShiftUpdate);$("#shift-update-tabs").tabs();$("#shiftID").hide();$("#shiftDaily").hide();$("#shiftWeekly").hide();$(".shiftCollective").hide();$(".shiftIndividual").hide();$("#rdoShiftUpdateType").focus();$(window).resize(resizeShiftUpdateGrid);resizeShiftUpdateGrid();clearShiftUpdate();$("#cobDept").change(populateEmployee);function rdoTypeChange(){if($("#rdoType:checked").val()=="C"){$("#shiftID").show("fast");$(".shiftIndividual").hide();$(".shiftCollective").show();$("#shiftDaily").hide();$("#shiftWeekly").hide()}else{if($("#rdoType:checked").val()=="I"){$("#shiftID").show("fast");$(".shiftCollective").hide();$(".shiftIndividual").show();$("#shiftDaily").show("fast");$("#shiftWeekly").hide()}}}$("input:radio[name=rdoType]").change(function(){rdoTypeChange()});$("input:radio[name=rdoType][value=C]").prop("checked",true);rdoTypeChange();$("input:radio[name=rdoShiftUpdateType]").change(function(){if($("#rdoShiftUpdateType:checked").val()==0){$("#shiftWeekly").hide();$("#shiftDaily").show("fast")}else{if($("#rdoShiftUpdateType:checked").val()==1){$("#shiftDaily").hide();$("#shiftWeekly").show()}}if($("#cobShiftGroup").val()!=""){showShiftDetail()}});$("#cobShiftGroup").change(function(){if($("#rdoShiftUpdateType:checked").val()!=""){showShiftDetail()}});function resizeShiftUpdateGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-shift-update-entry").outerHeight()-55;$("div#sbg-shift-update-data").css("height",a+"px")}function clearShiftUpdate(){$("#txtShiftUpdateId").val("Auto");$("input:radio[name=rdoShiftUpdateType]:checked").prop("checked",false);$("#rdoShiftUpdateType").focus();$("#cobShiftGroup").val("");$(".cobShift").val("");$("#cobDept").val(0);$("#cobEmpId").val("");$("#shift-update-tabs").tabs("option","active",0);$("#txtShiftUpdateDesc").focus();$("#shift_update_err_mesg").text("");$("#shift_update_err_desc").hide();shift_update_obj=null}function updateShiftUpdate(){saveShiftUpdate(C_UPDATE)}function addShiftUpdate(){saveShiftUpdate(C_ADD)}function saveShiftUpdate(d){if(validateShiftUpdate()){var c=$("input:radio[name=rdoType]:checked").val();var f;var b;if(c=="C"){b="";group_id=$("#cobShiftGroup").val();f=$("input:radio[name=rdoShiftUpdateType]:checked").val()}else{b=$("#cobEmpId").val();group_id="";f=""}var e={type:d,id:$("#txtShiftUpdateId").val(),shifttype:f,month:$("#cobMonth").val(),year:$("#cobYear").val(),updatetype:c,emp_id:b,groupid:group_id,shift01:$("#cobShift01").val(),shift02:$("#cobShift02").val(),shift03:$("#cobShift03").val(),shift04:$("#cobShift04").val(),shift05:$("#cobShift05").val(),shift06:$("#cobShift06").val(),shift07:$("#cobShift07").val(),shift08:$("#cobShift08").val(),shift09:$("#cobShift09").val(),shift10:$("#cobShift10").val(),shift11:$("#cobShift11").val(),shift12:$("#cobShift12").val(),shift13:$("#cobShift13").val(),shift14:$("#cobShift14").val(),shift15:$("#cobShift15").val(),shift16:$("#cobShift16").val(),shift17:$("#cobShift17").val(),shift18:$("#cobShift18").val(),shift19:$("#cobShift19").val(),shift20:$("#cobShift20").val(),shift21:$("#cobShift21").val(),shift22:$("#cobShift22").val(),shift23:$("#cobShift23").val(),shift24:$("#cobShift24").val(),shift25:$("#cobShift25").val(),shift26:$("#cobShift26").val(),shift27:$("#cobShift27").val(),shift28:$("#cobShift28").val(),shift29:$("#cobShift29").val(),shift30:$("#cobShift30").val(),shift31:$("#cobShift31").val(),shiftMon:$("#cobShiftMon").val(),shiftTue:$("#cobShiftTue").val(),shiftWed:$("#cobShiftWed").val(),shiftThu:$("#cobShiftThu").val(),shiftFri:$("#cobShiftFri").val(),shiftSat:$("#cobShiftSat").val(),shiftSun:$("#cobShiftSun").val()};var a="request.pzx?c="+shift_update_url+"&d="+new Date().getTime();callServer(a,"json",e,onShiftUpdateResponse,shift_update_obj)}}function editShiftUpdate(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+shift_update_url+"&d="+new Date().getTime();shift_update_obj=c;callServer(a,"json",b,showShiftUpdate,c)}function showShiftDetail(){var a=$("#rdoType:checked").val();var f=$("#rdoShiftUpdateType:checked").val();var c=$("#cobShiftGroup").val();var h=$("#cobEmpId").val();var g=$("#cobMonth").val();var d=$("#cobYear").val();var e={type:C_GET,groupType:a,shiftType:f,groupId:c,empId:h,month:g,year:d};var b="request.pzx?c="+shift_update_url+"&d="+new Date().getTime();callServer(b,"json",e,showShiftUpdate,shift_update_obj)}function showShiftUpdate(a,b){if(b.status==C_OK){if(b.data.shifttype==0){$("#shiftDaily").show();$("#shiftWeekly").hide();$("#cobShift01").val(b.data.shift01);$("#cobShift02").val(b.data.shift02);$("#cobShift03").val(b.data.shift03);$("#cobShift04").val(b.data.shift04);$("#cobShift05").val(b.data.shift05);$("#cobShift06").val(b.data.shift06);$("#cobShift07").val(b.data.shift07);$("#cobShift08").val(b.data.shift08);$("#cobShift09").val(b.data.shift09);$("#cobShift10").val(b.data.shift10);$("#cobShift11").val(b.data.shift11);$("#cobShift12").val(b.data.shift12);$("#cobShift13").val(b.data.shift13);$("#cobShift14").val(b.data.shift14);$("#cobShift15").val(b.data.shift15);$("#cobShift16").val(b.data.shift16);$("#cobShift17").val(b.data.shift17);$("#cobShift18").val(b.data.shift18);$("#cobShift19").val(b.data.shift19);$("#cobShift20").val(b.data.shift20);$("#cobShift21").val(b.data.shift21);$("#cobShift22").val(b.data.shift22);$("#cobShift23").val(b.data.shift23);$("#cobShift24").val(b.data.shift24);$("#cobShift25").val(b.data.shift25);$("#cobShift26").val(b.data.shift26);$("#cobShift27").val(b.data.shift27);$("#cobShift28").val(b.data.shift28);$("#cobShift29").val(b.data.shift29);$("#cobShift30").val(b.data.shift30);$("#cobShift31").val(b.data.shift31)}else{if(b.data.shifttype==1){$("#shiftDaily").hide();$("#shiftWeekly").show();$("#cobShiftMon").val(b.data.shiftMon);$("#cobShiftTue").val(b.data.shiftTue);$("#cobShiftWed").val(b.data.shiftWed);$("#cobShiftThu").val(b.data.shiftThu);$("#cobShiftFri").val(b.data.shiftFri);$("#cobShiftSat").val(b.data.shiftSat);$("#cobShiftSun").val(b.data.shiftSun)}}$("#btnShiftUpdateUpdate").prop("disabled","");$("#txtShiftUpdateDesc").focus()}else{showDialog("System Message",b.mesg)}}function onShiftUpdateResponse(f,g){if(g.status==C_OK){if(g.type==C_ADD){}else{if(g.type==C_UPDATE){if($("#rdoShiftUpdateType:checked").val()==0){var h="Daily"}else{if($("#rdoShiftUpdateType:checked").val()==1){var h="Weekly"}}$($(f).closest("tr")).children("td:eq(1)").html(h);$($(f).closest("tr")).children("td:eq(2)").text($("#cobShiftGroup :selected").text());$("#sbg-popup-box").html(g.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(10000);clearShiftUpdate()}else{if(g.type==C_GET+"_EMP"){var b=g.data.empList;var a=b.split("|");var e="";var d="";for(var c=0;c<a.length;c++){e=a[c].split(":");d+="<option value='"+e[0]+"'>"+e[1]+"</option>"}$("#cobEmpId").html(d)}}}}else{showDialog("Error",g.mesg)}}function validateShiftUpdate(){$("#shift_update_err_mesg").text("");if($("#rdoType:checked").val()=="C"){if($("input:radio[name=rdoShiftUpdateType]:checked").blank()){$("#shift_update_err_desc").show();$("#rdoShiftUpdateType").focus();$("#shift_update_err_mesg").text("shift type must be chosen.");return false}if($("#cobShiftGroup").blank()){$("#shift_update_err_desc").show();$("#cobShiftGroup").focus();$("#shift_update_err_mesg").text("shift group can not be blank.");return false}else{$("#shift_update_err_desc").hide()}}else{if($("#rdoType:checked").val()=="I"){}}return true}function populateEmployee(){$dept_id=$("#cobDept").val();var b={type:C_GET+"_EMP",id:$dept_id};var a="request.pzx?c="+shift_update_url+"&d="+new Date().getTime();callServer(a,"json",b,onShiftUpdateResponse,shift_update_obj)};