var paytype_obj=null;$(document).ready(function(){$("input").css("marginTop",0);$("input").css("marginBottom",0);$("select").css("marginTop",0);$("select").css("marginBottom",0);$("#btnPayTypeClear").button().bind("click",clearPayType);$("#btnPayTypeUpdate").button().bind("click",updatePayType);$("#btnPayTypeAdd").button().bind("click",addPayType);$("#btnPayTypePrint").button().bind("click",printPayType);$("#paytype-tabs").tabs();$("#txtPayTypeDesc").focus();clearPayType();$(window).resize(resizePayTypeGrid);resizePayTypeGrid()});function resizePayTypeGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-paytype-entry").outerHeight()-55;$("div#sbg-paytype-data").css("height",a+"px")}function clearPayType(){$("#txtPayTypeId").val("Auto");$("#txtPayTypeDesc").val("");$("#txtPayTypeRef").val("");$("#txtPayTypeText").val("");$("#cobPayTypeTax").val("0");$("#cobPayTypeIncome").val("0");$("#cobPayTypeWage").val("0");$("#paytype_err_desc").hide();$("#paytype-tabs").tabs("option","active",0);$("#txtPayTypeDesc").focus();$("#btnPayTypeUpdate").attr("disabled","disabled");$("#paytype_err_mesg").text("");$("#paytype_err_desc").hide();paytype_obj=null}function updatePayType(){savePayType(C_UPDATE)}function addPayType(){savePayType(C_ADD)}function savePayType(b){if(validatePayType()){var c={type:b,id:$("#txtPayTypeId").val(),desc:$("#txtPayTypeDesc").val(),refno:$("#txtPayTypeRef").val(),text:$("#txtPayTypeText").val(),wagetype:$("#cobPayTypeWage").val(),taxtype:$("#cobPayTypeTax").val(),incometype:$("#cobPayTypeIncome").val(),value:0};var a="request.pzx?c="+paytype_url+"&d="+new Date().getTime();callServer(a,"json",c,onPayTypeResponse,paytype_obj)}}function printPayType(){var a="report.pzx?c="+paytype_url+"&d="+new Date().getTime();showReport(a)}function editPayType(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+paytype_url+"&d="+new Date().getTime();paytype_obj=c;callServer(a,"json",b,showPayType,c)}function deletePayType(d,c){if(confirm("Confirm you want to delete pay type id : "+d+"?")){var b={type:C_DELETE,id:d};var a="request.pzx?c="+paytype_url+"&d="+new Date().getTime();callServer(a,"json",b,onPayTypeResponse,c)}}function showPayType(a,b){if(b.status==C_OK){$("#txtPayTypeId").val(b.data.id);$("#txtPayTypeDesc").val(b.data.desc);$("#txtPayTypeRef").val(b.data.refno);$("#txtPayTypeText").val(b.data.text);$("#cobPayTypeWage").val(b.data.wagetype);$("#cobPayTypeTax").val(b.data.taxtype);$("#cobPayTypeIncome").val(b.data.incometype);$("#txtPayTypeDesc").focus();$("#btnPayTypeUpdate").removeAttr("disabled")}else{showDialog("System Message",b.mesg)}}function onPayTypeResponse(a,b){if(b.status==C_OK){if(b.type==C_ADD){$("#sbg-paytype-table tr:first").after("<tr><td>"+b.data+"</td><td>"+$("#txtPayTypeDesc").val()+"</td><td>"+$("#txtPayTypeRef").val()+"</td><td style='text-align:center'><a href='javascript:' onclick='editPayType("+b.data+",this)'><img src='image/edit_16.png' title='Edit'></img></a></td><td style='text-align:center'><a href='javascript:' onclick='deletePayType("+b.data+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")}else{if(b.type==C_DELETE){$($(a).closest("tr")).remove()}else{if(b.type==C_UPDATE){$($(a).closest("tr")).children("td:eq(1)").html($("#txtPayTypeDesc").val());$($(a).closest("tr")).children("td:eq(2)").text($("#txtPayTypeRef").val())}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000);clearPayType()}else{showDialog("Error",b.mesg)}}function validatePayType(){$("#paytype_err_mesg").text("");if($("#txtPayTypeDesc").blank()){$("#paytype_err_desc").show();$("#txtPayTypeDesc").focus();$("#paytype_err_mesg").text("Pay type description can not be blank.");return false}else{$("#paytype_err_desc").hide()}return true};