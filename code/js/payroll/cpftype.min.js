var cpftype_obj=null;$(document).ready(function(){$("input").css("marginTop",0);$("input").css("marginBottom",0);$("select").css("marginTop",0);$("select").css("marginBottom",0);$("#btnCpfTypeClear").button().bind("click",clearCpfType);$("#btnCpfTypeUpdate").button().bind("click",updateCpfType);$("#btnCpfTypeAdd").button().bind("click",addCpfType);$("#btnCpfTypePrint").button().bind("click",printCpfType);$("#txtCpfTypeOw").keypress(function(){numericInput(2,".",0,2)});$("#txtCpfTypeAw").keypress(function(){numericInput(2,".",0,2)});for(var b=1;b<7;b++){for(var a=1;a<7;a++){$("#txtCpfTypeEmpFix_"+a+"_"+b).keypress(function(){numericInput(2,".",0,4)});$("#txtCpfTypeEmpRate_"+a+"_"+b).keypress(function(){numericInput(2,".",0,4)});$("#txtCpfTypeEmpOff_"+a+"_"+b).keypress(function(){numericInput(2,".",0,4)});$("#txtCpfTypeCoyRate_"+a+"_"+b).keypress(function(){numericInput(2,".",0,4)});$("#txtCpfTypeCoyFix_"+a+"_"+b).keypress(function(){numericInput(2,".",0,4)});$("#txtCpfTypeCoyOff_"+a+"_"+b).keypress(function(){numericInput(2,".",0,4)})}}$("#cpftype-tabs").tabs();$("#txtCpfTypeDesc").focus();$(window).resize(resizeCpfTypeGrid);resizeCpfTypeGrid();clearCpfType()});function resizeCpfTypeGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-cpftype-entry").outerHeight()-55;$("div#sbg-cpftype-data").css("height",a+"px")}function clearCpfType(){$("#txtCpfTypeId").val("Auto");$("#txtCpfTypeDesc").val("");$("#txtCpfTypeOw").val("");$("#txtCpfTypeAw").val("");for(var b=1;b<7;b++){for(var a=1;a<7;a++){$("#txtCpfTypeEmpFix_"+a+"_"+b).val("");$("#txtCpfTypeEmpRate_"+a+"_"+b).val("");$("#txtCpfTypeEmpOff_"+a+"_"+b).val("");$("#txtCpfTypeCoyRate_"+a+"_"+b).val("");$("#txtCpfTypeCoyFix_"+a+"_"+b).val("");$("#txtCpfTypeCoyOff_"+a+"_"+b).val("")}}$("#cpftype-tabs").tabs("option","active",0);$("#txtCpfTypeDesc").focus();$("#btnCpfTypeUpdate").attr("disabled","disabled");$("#cpftype_err_mesg").text("");$("#cpftype_err_desc").hide();cpftype_obj=null}function updateCpfType(){saveCpfType(C_UPDATE)}function addCpfType(){saveCpfType(C_ADD)}function saveCpfType(b){if(validateCpfType()){var c={type:b,id:$("#txtCpfTypeId").val(),desc:$("#txtCpfTypeDesc").val(),ow:$("#txtCpfTypeOw").val(),aw:$("#txtCpfTypeAw").val(),empfix:getCpfTypeEmpFix(),emprate:getCpfTypeEmpRate(),empoff:getCpfTypeEmpOff(),coyfix:getCpfTypeCoyFix(),coyrate:getCpfTypeCoyRate(),coyoff:getCpfTypeCoyOff()};var a="request.pzx?c="+cpftype_url+"&d="+new Date().getTime();callServer(a,"json",c,onCpfTypeResponse,cpftype_obj)}}function printCpfType(){var a="report.pzx?c="+cpftype_url+"&d="+new Date().getTime();showReport(a)}function editCpfType(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+cpftype_url+"&d="+new Date().getTime();cpftype_obj=c;callServer(a,"json",b,showCpfType,c)}function deleteCpfType(d,c){if(confirm("Confirm you want to delete cpf type id : "+d+"?")){var b={type:C_DELETE,id:d};var a="request.pzx?c="+cpftype_url+"&d="+new Date().getTime();callServer(a,"json",b,onCpfTypeResponse,c)}}function showCpfType(a,b){if(b.status==C_OK){$("#txtCpfTypeId").val(b.data.id);$("#txtCpfTypeDesc").val(b.data.desc);$("#txtCpfTypeOw").val(b.data.ow);$("#txtCpfTypeAw").val(b.data.aw);setCpfTypeEmpFix(b.data.empfix);setCpfTypeEmpRate(b.data.emprate);setCpfTypeEmpOff(b.data.empoff);setCpfTypeCoyFix(b.data.coyfix);setCpfTypeCoyRate(b.data.coyrate);setCpfTypeCoyOff(b.data.coyoff);$("#txtCpfTypeDesc").focus();$("#btnCpfTypeUpdate").prop("disabled","")}else{showDialog("System Message",b.mesg)}}function onCpfTypeResponse(a,b){if(b.status==C_OK){if(b.type==C_ADD){$("#sbg-cpftype-table tr:first").after("<tr><td>"+b.data+"</td><td>"+$("#txtCpfTypeDesc").val()+"</td><td style='text-align:center'><a href='javascript:' onclick='editCpfType("+b.data+",this)'><img src='image/edit_16.png' title='Edit'></img></a></td><td style='text-align:center'><a href='javascript:' onclick='deleteCpfType("+b.data+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")}else{if(b.type==C_DELETE){$($(a).closest("tr")).remove()}else{if(b.type==C_UPDATE){$($(a).closest("tr")).children("td:eq(1)").html($("#txtCpfTypeDesc").val())}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000);clearCpfType()}else{showDialog("Error",b.mesg)}}function validateCpfType(){$("#cpftype_err_mesg").text("");if($("#txtCpfTypeDesc").blank()){$("#cpftype_err_desc").show();$("#txtCpfTypeDesc").focus();$("#cpftype_err_mesg").text("CPF type description can not be blank.");return false}else{$("#cpftype_err_desc").hide()}return true}function setCpfTypeEmpFix(a){if(a==undefined||a==null||a==""){return}var d=a.split("|");for(var c=1;c<7;c++){if(d[c]!=""){fld=d[c-1].split(":");for(var b=1;b<7;b++){$("#txtCpfTypeEmpFix_"+c+"_"+b).val(fld[b-1])}}}}function setCpfTypeEmpRate(a){if(a==undefined||a==null||a==""){return}var d=a.split("|");for(var c=1;c<7;c++){if(d[c]!=""){fld=d[c-1].split(":");for(var b=1;b<7;b++){$("#txtCpfTypeEmpRate_"+c+"_"+b).val(fld[b-1])}}}}function setCpfTypeEmpOff(a){if(a==undefined||a==null||a==""){return}var d=a.split("|");for(var c=1;c<7;c++){if(d[c]!=""){fld=d[c-1].split(":");for(var b=1;b<7;b++){$("#txtCpfTypeEmpOff_"+c+"_"+b).val(fld[b-1])}}}}function setCpfTypeCoyFix(a){if(a==undefined||a==null||a==""){return}var d=a.split("|");for(var c=1;c<7;c++){if(d[c]!=""){fld=d[c-1].split(":");for(var b=1;b<7;b++){$("#txtCpfTypeCoyFix_"+c+"_"+b).val(fld[b-1])}}}}function setCpfTypeCoyRate(a){if(a==undefined||a==null||a==""){return}var d=a.split("|");for(var c=1;c<7;c++){if(d[c]!=""){fld=d[c-1].split(":");for(var b=1;b<7;b++){$("#txtCpfTypeCoyRate_"+c+"_"+b).val(fld[b-1])}}}}function setCpfTypeCoyOff(a){if(a==undefined||a==null||a==""){return}var d=a.split("|");for(var c=1;c<7;c++){if(d[c]!=""){fld=d[c-1].split(":");for(var b=1;b<7;b++){$("#txtCpfTypeCoyOff_"+c+"_"+b).val(fld[b-1])}}}}function getCpfTypeEmpFix(){var d="";var e="";var c="";var f="";for(var b=1;b<7;b++){f="";e="";for(var a=1;a<7;a++){f=f+e+$("#txtCpfTypeEmpFix_"+b+"_"+a).val();e=":"}d=d+c+f;c="|"}return d}function getCpfTypeEmpRate(){var d="";var e="";var c="";var f="";for(var b=1;b<7;b++){f="";e="";for(var a=1;a<7;a++){f=f+e+$("#txtCpfTypeEmpRate_"+b+"_"+a).val();e=":"}d=d+c+f;c="|"}return d}function getCpfTypeEmpOff(){var d="";var e="";var c="";var f="";for(var b=1;b<7;b++){f="";e="";for(var a=1;a<7;a++){f=f+e+$("#txtCpfTypeEmpOff_"+b+"_"+a).val();e=":"}d=d+c+f;c="|"}return d}function getCpfTypeCoyFix(){var d="";var e="";var c="";var f="";for(var b=1;b<7;b++){f="";e="";for(var a=1;a<7;a++){f=f+e+$("#txtCpfTypeCoyFix_"+b+"_"+a).val();e=":"}d=d+c+f;c="|"}return d}function getCpfTypeCoyRate(){var d="";var e="";var c="";var f="";for(var b=1;b<7;b++){f="";e="";for(var a=1;a<7;a++){f=f+e+$("#txtCpfTypeCoyRate_"+b+"_"+a).val();e=":"}d=d+c+f;c="|"}return d}function getCpfTypeCoyOff(){var d="";var e="";var c="";var f="";for(var b=1;b<7;b++){f="";e="";for(var a=1;a<7;a++){f=f+e+$("#txtCpfTypeCoyOff_"+b+"_"+a).val();e=":"}d=d+c+f;c="|"}return d};