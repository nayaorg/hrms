var emppay_obj=null;var emppay_id="";$(document).ready(function(){$("input").css("marginTop",0);$("input").css("marginBottom",0);$("select").css("marginTop",0);$("select").css("marginBottom",0);var a={dateFormat:"dd/mm/yy",appendText:"  dd/mm/yyyy",showOn:"button",buttonImage:"image/calendar.gif",buttonImageOnly:true};$("#txtEmpPayStart").datepicker(a);$("#txtEmpPayEnd").datepicker(a);$("#txtEmpPayStart").keypress(function(){dateInput("/")});$("#txtEmpPayEnd").keypress(function(){dateInput("/")});$("#btnEmpPayClear").button().bind("click",clearEmpPay);$("#btnEmpPaySave").button().bind("click",saveEmpPay);$("#btnEmpPayList").button().bind("click",listEmpPay);$("#txtEmpPayValue").keypress(function(){numericInput(2,".",0,2)});for(var b=1;b<7;b++){$("#txtEmpPayIncome"+b).keypress(function(){numericInput(2,".",0,2)})}$("#emppay-tabs").tabs();$("#cobEmpPayCycle").focus();$(window).resize(resizeEmpPayGrid);resizeEmpPayGrid();clearEmpPay()});function resizeEmpPayGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-emppay-entry").outerHeight()-$("#sbg-payentry-option").outerHeight()-55;$("div#sbg-emppay-data").css("height",a+"px")}function clearEmpPay(){$("#lblEmpPayIdName").text("");$("#lblEmpPayCoy").text("");$("#txtEmpPayStart").val("");$("#txtEmpPayEnd").val("");$("#txtEmpPayValue").val("");$("#chkEmpPaySdl").prop("checked",false);$("#chkEmpPayMbmf").prop("checked",false);$("#chkEmpPaySinda").prop("checked",false);$("#chkEmpPayCdac").prop("checked",false);$("#chkEmpPayEcf").prop("checked",false);$("#cobEmpPayCpf").val("");$("#txtEmpPayCpfNo").val("");$("#txtEmpPayAcct").val("");for(var a=1;a<7;a++){$("#cobEmpPayIncome"+a).val("");$("#txtEmpPayIncome"+a).val("")}$("#emppay-tabs").tabs("option","active",0);$("#cobEmpPayCycle").focus();$("#btnEmpPaySave").attr("disabled","disabled");$("#emppay_err_mesg").text("");$("#emppay_err_cpfno").hide();$("#emppay_err_start").hide();$("#emppay_err_end").hide();emppay_obj=null}function saveEmpPay(){if(validateEmpPay()){var e="0";var a="0";var d="0";var b="0";var g="0";if($("#chkEmpPaySdl").is(":checked")){e="1"}if($("#chkEmpPayMbmf").is(":checked")){a="1"}if($("#chkEmpPaySinda").is(":checked")){d="1"}if($("#chkEmpPayCdac").is(":checked")){b="1"}if($("#chkEmpPayEcf").is(":checked")){g="1"}var f={type:C_UPDATE,id:emppay_id,bank:"",acct:$("#txtEmpPayAcct").val(),sdl:e,mbmf:a,sinda:d,cdac:b,ecf:g,income:getEmpPayIncome(),value:$("#txtEmpPayValue").val(),cpftype:$("#cobEmpPayCpf").val(),cpfno:$("#txtEmpPayCpfNo").val(),start:$("#txtEmpPayStart").val,end:$("#txtEmpPayEnd").val()};var c="request.pzx?c="+emppay_url+"&d="+new Date().getTime();callServer(c,"json",f,onEmpPayResponse,emppay_obj)}}function editEmpPay(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+emppay_url+"&d="+new Date().getTime();emppay_obj=c;callServer(a,"json",b,showEmpPay,c)}function listEmpPay(){var b={type:C_LIST,coy:$("#cobEmpPayCoy").val(),dept:$("#cobEmpPayDept").val()};var a="request.pzx?c="+emppay_url+"&d="+new Date().getTime();callServer(a,"html",b,showEmpPayList,emppay_obj)}function showEmpPay(a,b){if(b.status==C_OK){emppay_id=b.data.id;$("#lblEmpPayIdName").text(b.data.id+" - "+b.data.name);$("#lblEmpPayCoy").text(b.data.coy+" - "+b.data.dept);$("#txtEmpPayValue").val(b.data.value);$("#txtEmpPayAcct").val(b.data.acct);$("#cobEmpPayCpf").val(b.data.cpftype);$("#txtEmpPayCpfNo").val(b.data.cpfno);$("#txtEmpPayStart").val(b.data.start);$("#txtEmpPayEnd").val(b.data.end);if(b.data.income!=""){setEmpPayIncome(b.data.income)}if(b.data.sdl=="1"){$("#chkEmpPaySdl").prop("checked",true)}else{$("#chkEmpPaySdl").prop("checked",false)}if(b.data.mbmf=="1"){$("#chkEmpPayMbmf").prop("checked",true)}else{$("#chkEmpPayMbmf").prop("checked",false)}if(b.data.sinda=="1"){$("#chkEmpPaySinda").prop("checked",true)}else{$("#chkEmpPaySinda").prop("checked",false)}if(b.data.cdac=="1"){$("#chkEmpPayCdac").prop("checked",true)}else{$("#chkEmpPayCdac").prop("checked",false)}if(b.data.ecf=="1"){$("#chkEmpPayEcf").prop("checked",true)}else{$("#chkEmpPayEcf").prop("checked",false)}$("#txtEmpPayValue").focus();$("#btnEmpPaySave").prop("disabled","")}else{showDialog("System Message",b.mesg)}}function showEmpPayList(b,c){var a='<tr><td style="width:50px;height:1px"></td><td style="width:200px"></td><td style="width:200px"></td><td style="width:150px"></td><td style="width:20px"></td></tr>';$("#sbg-emppay-table").html(a+c)}function onEmpPayResponse(a,b){if(b.status==C_OK){$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000);clearEmpPay()}else{showDialog("Error",b.mesg)}}function validateEmpPay(){$("#emppay_err_mesg").text("");if(!$("#cobEmpPayCpf").blank()){if($("#txtEmpPayCpfNo").blank()){$("#emppay_err_cpfno").show();$("#txtEmpPayCpfNo").focus();$("#emppay_err_mesg").text("CPF No can not be blank.");return false}else{$("#emppay_err_cpfno").hide()}}if($("#txtEmpPayStart").val()!=""){if($("#txtEmpPayStart").validDate()){$("#emppay_err_start").hide()}else{$("#emppay_err_start").show();$("#txtEmpPayStart").focus();$("#emppay_err_mesg").text("Invalid date entry for Pay start date");return false}}if($("#txtEmpPayEnd").val()!=""){if($("#txtEmpPayEnd").validDate()){$("#emppay_err_end").hide()}else{$("#emppay_err_end").show();$("#txtEmpPayEnd").focus();$("#emppay_err_mesg").text("Invalid date entry for Pay end date");return false}}return true}function getEmpPayIncome(){var c="";var a="";for(var b=1;b<7;b++){if($("#cobEmpPayIncome"+b).val()!=""&&$("#txtEmpPayIncome"+b).val()!=""){c=c+a+$("#cobEmpPayIncome"+b).val()+":"+$("#txtEmpPayIncome"+b).val();a="|"}}return c}function setEmpPayIncome(b){if(b==undefined||b==null||b==""){return}var e=b.split("|");var d="";var a=1;for(var c=0;c<e.length;c++){if(e[c]!=""){d=e[c].split(":");$("#cobEmpPayIncome"+a).val(d[0]);$("#txtEmpPayIncome"+a).val(d[1]);a++}}};