var emptype_obj=null;$(document).ready(function(){$("#btnEmpTypeClear").button().bind("click",clearEmpType);$("#btnEmpTypeAdd").button().bind("click",addEmpType);$("#btnEmpTypeUpdate").button().bind("click",updateEmpType);$("#btnEmpTypePrint").button().bind("click",printEmpType);$("#emptype-tabs").tabs();$("#txtEmpTypeDesc").focus();$(window).resize(resizeEmpTypeGrid);resizeEmpTypeGrid();clearEmpType()});function resizeEmpTypeGrid(){var a=$("#sbg-center-panel").outerHeight()-$("#sbg-emptype-entry").outerHeight()-55;$("div#sbg-emptype-data").css("height",a+"px")}function clearEmpType(){$("#txtEmpTypeId").val("Auto");$("#txtEmpTypeDesc").val("");$("#txtEmpTypeRef").val("");$("#emptype-tabs").tabs("option","active",0);$("#txtEmpTypeDesc").focus();$("#btnEmpTypeUpdate").prop("disabled","disabled");$("#emptype_err_mesg").text("");$("#emptype_err_desc").hide();emptype_obj=null}function updateEmpType(){saveEmpType(C_UPDATE)}function addEmpType(){saveEmpType(C_ADD)}function saveEmpType(b){if(validateEmpType()){var c={type:b,id:$("#txtEmpTypeId").val(),desc:$("#txtEmpTypeDesc").val(),refno:$("#txtEmpTypeRef").val()};var a="request.pzx?c="+emptype_url+"&d="+new Date().getTime();callServer(a,"json",c,onEmpTypeResponse,emptype_obj)}}function printEmpType(){var a="report.pzx?c="+emptype_url+"&d="+new Date().getTime();showReport(a)}function editEmpType(d,c){var b={type:C_GET,id:d};var a="request.pzx?c="+emptype_url+"&d="+new Date().getTime();emptype_obj=c;callServer(a,"json",b,showEmpType,c)}function deleteEmpType(d,c){if(confirm("Confirm you want to delete employee type id : "+d+"?")){var b={type:C_DELETE,id:d};var a="request.pzx?c="+emptype_url+"&d="+new Date().getTime();callServer(a,"json",b,onEmpTypeResponse,c)}}function showEmpType(a,b){if(b.status==C_OK){$("#txtEmpTypeId").val(b.data.id);$("#txtEmpTypeDesc").val(b.data.desc);$("#txtEmpTypeRef").val(b.data.refno);$("#btnEmpTypeUpdate").prop("disabled","");$("#txtEmpTypeDesc").focus()}else{showDialog("System Message",b.mesg)}}function onEmpTypeResponse(a,b){if(b.status==C_OK){if(b.type==C_ADD){$("#sbg-emptype-table tr:first").after("<tr><td>"+b.data+"</td><td>"+$("#txtEmpTypeDesc").val()+"</td><td>"+$("#txtEmpTypeRef").val()+"</td><td style='text-align:center'><a href='javascript:' onclick='editEmpType("+b.data+",this)'><img src='image/edit_16.png' title='Edit'></img></a></td><td style='text-align:center'><a href='javascript:' onclick='deleteEmpType("+b.data+",this)'><img src='image/delete_16.png' title='Delete'></img></a></td></tr>")}else{if(b.type==C_DELETE){$($(a).closest("tr")).remove()}else{if(b.type==C_UPDATE){$($(a).closest("tr")).children("td:eq(1)").html($("#txtEmpTypeDesc").val());$($(a).closest("tr")).children("td:eq(2)").text($("#txtEmpTypeRef").val())}}}$("#sbg-popup-box").html(b.mesg);$("#sbg-popup-box").show();$("#sbg-popup-box").fadeOut(5000);clearEmpType()}else{showDialog("Error",b.mesg)}}function validateEmpType(){$("#emptype_err_mesg").text("");if($("#txtEmpTypeDesc").blank()){$("#emptype_err_desc").show();$("#txtEmpTypeDesc").focus();$("#emptype_err_mesg").text("employee type description can not be blank.");return false}else{$("#emptype_err_desc").hide()}return true};